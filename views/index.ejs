<!DOCTYPE html>
<html>
  <head>
    <title>BitKata 🏀</title>
      <meta charset="UTF-8">
      <link rel="stylesheet" href="/stylesheets/style.css" />
      <link rel="stylesheet" href="/lib/codemirror/codemirror_v6.65.7.css" />
  </head>
  <body>
    <script src="/lib/codemirror/codemirror_v6.65.7.js"></script>
    <script src="/lib/codemirror/codemirror_mode_js_v6.65.7.js"></script>

  <h1>BitKata 🏀</h1>
  <h2>코딩 전쟁이 일어난다. 모든 대원들, 전투 준비!</h2>
  <a href="/login">로그인 페이지</a>
  <br>
  <ul class="tabs">
    <select name="dropdown" id="dropdown" onchange="filterProblems()" >
      <option value="all">전체</option>
      <option value="1">Level 1</option>
      <option value="2">Level 2</option>
      <option value="3">Level 3</option>
    </select>
  </ul>

  <ul class="problems">
    <br>
    <%for (const [index, problem] of problems.entries()) {%>
      <li data-level=<%= problem.difficulty_level %> class="li-<%= index+1 %>">
        <a class="title" href="/problems/<%= index %>"><%= problem.title %></a>
        <div>정답자: <%= problem.completed_users %></div>
        <div>난이도: Level <%= problem.difficulty_level %></div>
      </li>
    <% } %>

  </ul>
  <script>
    function filterProblems() {
      const selectLevel = document.querySelector("#dropdown").value;
      const lis = document.querySelectorAll(".problems li");
      lis.forEach(li => {
        const datalevel = li.dataset.level;
        if (selectLevel === "all" || selectLevel === datalevel) {
          li.style.display = "block";
        } else {
          li.style.display = "none";
        }
      });
    }

    function handleClick(problemId) {
      window.location.href = `/problems/${problemId}`;
    }
  </script>
  </body>
</html>
